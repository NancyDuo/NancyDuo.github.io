

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#7D5A50">
  <meta name="description" content="">
  <meta name="author" content="Nancy">
  <meta name="keywords" content="">
  <meta name="description" content="Redux in Typescript is different from Redux in JS. We will need define the type specificly. Build Folders as Following. Create Reducerswe will need define state type and action type here. import Actio">
<meta property="og:type" content="article">
<meta property="og:title" content="Redux in TS">
<meta property="og:url" content="http://example.com/2021/11/09/Redux%20in%20TS/index.html">
<meta property="og:site_name" content="Nancy&#39;s Blog">
<meta property="og:description" content="Redux in Typescript is different from Redux in JS. We will need define the type specificly. Build Folders as Following. Create Reducerswe will need define state type and action type here. import Actio">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/redux-ts.png">
<meta property="article:published_time" content="2021-11-09T07:12:20.646Z">
<meta property="article:modified_time" content="2021-11-09T07:39:46.765Z">
<meta property="article:author" content="Nancy">
<meta property="article:tag" content="React">
<meta property="article:tag" content="TypeScript">
<meta property="article:tag" content="Redux">
<meta property="article:tag" content="React Hook">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/redux-ts.png">
  
  <title>Redux in TS - Nancy&#39;s Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      
        
          
          
          
        
        <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-dark.min.css" />
      
      
        <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/line-numbers/prism-line-numbers.min.css" />
      
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":true},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Nancy Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/demo/">
                <i class="iconfont icon-link-fill"></i>
                Demo
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/er.jpeg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Redux in TS">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Nancy
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-11-09 18:12" pubdate>
        November 9, 2021 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.8k words
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      12 minutes
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> times
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Redux in TS</h1>
            
            <div class="markdown-body">
              <p>Redux in Typescript is different from Redux in JS. We will need define the type specificly. Build Folders as Following.<br><img src="/img/redux-ts.png" srcset="/img/loading.gif" lazyload alt="redux-ts"></p>
<h3 id="Create-Reducers"><a href="#Create-Reducers" class="headerlink" title="Create Reducers"></a>Create Reducers</h3><p>we will need define state type and action type here.</p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">import Action from &quot;..&#x2F;actions&quot;;
import  &#123;ActionType &#125; from &quot;..&#x2F;action-types&quot;;
const initState &#x3D; 0;

const bankReducer &#x3D; (state: number &#x3D; initState, action: Action) &#x3D;&gt; &#123;

    switch (action.type) &#123;
        case ActionType.DEPOSIT:
            return state + action.payload

        case ActionType.WITHDRAW:
            return state - action.payload

        case ActionType.BANKRUPT:
            return 0
            
        default:
            return state
    &#125;
&#125;
export default bankReducer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<p>Also,to avoid typo, we can define action type through enum as following.</p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">export enum ActionType&#123;
    DEPOSIT &#x3D; &#39;deposit&#39;,
    WITHDRAW &#x3D; &#39;withdraw&#39;,
    BANKRUPT &#x3D; &#39;bankrupt&#39;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<p>Then combine all reducers if you have in index file.</p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">import &#123;combineReducers&#125; from &#39;redux&#39;
import bankReducer from &#39;.&#x2F;bankReducer&#39;

const reducers  &#x3D; combineReducers(&#123;
    bank: bankReducer
&#125;)

export default reducers

export type State &#x3D; ReturnType&lt;typeof reducers&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h2 id="Create-Actions"><a href="#Create-Actions" class="headerlink" title="Create Actions"></a>Create Actions</h2><p>We will need 2 steps. For example, we got 3 types of actions here.</p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">interface DepositAction &#123;
    type: &#39;deposit&#39;,
    payload: number
&#125;
interface WithdrawAction &#123;
    type: &#39;withdraw&#39;,
    payload: number
&#125;
interface BankruptAction &#123;
    type: &#39;bankrupt&#39;,
&#125;

type Action &#x3D; DepositAction | WithdrawAction | BankruptAction

export default Action<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<p>Then create action </p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">import &#123; ActionType &#125; from &quot;..&#x2F;action-types&quot;;
import &#123; Dispatch &#125; from &quot;redux&quot;;
import Action from &quot;..&#x2F;actions&quot;;

export const depositMoney &#x3D; (amount:number)&#x3D;&gt;&#123;
    return (dispatch:Dispatch&lt;Action&gt;)&#x3D;&gt;&#123;
        dispatch(&#123;
            type:ActionType.DEPOSIT,
            payload:amount
        &#125;)
    &#125;
&#125;

export const withdrawMoney &#x3D; (amount:number)&#x3D;&gt;&#123;
    return (dispatch:Dispatch&lt;Action&gt;)&#x3D;&gt;&#123;
        dispatch(&#123;
            type:ActionType.WITHDRAW,
            payload:amount
        &#125;)
    &#125;
&#125;

export const bankRupt &#x3D; ()&#x3D;&gt;&#123;
    return (dispatch:Dispatch&lt;Action&gt;)&#x3D;&gt;&#123;
        dispatch(&#123;
            type:ActionType.BANKRUPT,
        &#125;)
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h2 id="Create-Store"><a href="#Create-Store" class="headerlink" title="Create Store"></a>Create Store</h2><p>In store.js, it is same as in JS.</p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">import &#123; createStore,applyMiddleware &#125; from &quot;redux&quot;;
import reducers from &quot;.&#x2F;reducers&quot;;
import thunk from &#39;redux-thunk&#39;

export const store &#x3D; createStore(
    reducers,
    &#123;&#125;,
    applyMiddleware(thunk)

)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h2 id="Export-in-one-file"><a href="#Export-in-one-file" class="headerlink" title="Export in one file"></a>Export in one file</h2><p>I would like to export all in one index file. See following</p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">export * as actionCreators from &#39;.&#x2F;action-creators&#39;
export * from &#39;.&#x2F;store&#39;
export * from &#39;.&#x2F;reducers&#x2F;index&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div>
<h2 id="Use-Redux"><a href="#Use-Redux" class="headerlink" title="Use Redux"></a>Use Redux</h2><p>Redux in TS and React Hooks</p>
<div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">import React, &#123; useState,useRef&#125; from &#39;react&#39;;
import &#123; useDispatch, useSelector &#125; from &#39;react-redux&#39;
import &#123; bindActionCreators &#125; from &#39;redux&#39;;
import &#123; actionCreators, State &#125; from &#39;.&#x2F;state&#39;;

function App() &#123;
  const dispatch &#x3D; useDispatch()
  const &#123; depositMoney, withdrawMoney, bankRupt &#125; &#x3D; bindActionCreators(actionCreators, dispatch)
  const amount &#x3D; useSelector((state: State) &#x3D;&gt; state.bank)
 

  &#x2F;&#x2F; handleDeposit
  const handleDeposit &#x3D; ()&#x3D;&gt;&#123;
    depositMoney(sliderValue)
  &#125;

  &#x2F;&#x2F; handle withdraw
    const handleWithdraw &#x3D; ()&#x3D;&gt;&#123;
      withdrawMoney(sliderValue)
    &#125;

  return (
    &lt;div className&#x3D;&quot;App&quot;&gt;

        &#123;&#x2F;* current money *&#x2F;&#125;
        &lt;h2 style&#x3D;&#123;&#123; color: &#39;#a3aab9&#39; &#125;&#125;&gt;TOTAL : &#123;amount&#125;&lt;&#x2F;h2&gt;

        &#123;&#x2F;* buttons *&#x2F;&#125;
        &lt;div className&#x3D;&#39;btn-wrapper&#39;&gt;
          &lt;button onClick&#x3D;&#123;handleDeposit&#125;&gt;DEPOSIT
          &lt;&#x2F;button&gt;
          &lt;button onClick&#x3D;&#123;handleWithdraw&#125;&gt;WITHDRAW
          &lt;&#x2F;button&gt;
          &lt;button onClick&#x3D;&#123;() &#x3D;&gt; bankRupt()&#125;&gt;BANKRUPT&lt;&#x2F;button&gt;
        &lt;&#x2F;div&gt;
    &lt;&#x2F;div&gt;
  );
&#125;

export default App;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/React/">React</a>
                    
                      <a class="hover-with-bg" href="/tags/TypeScript/">TypeScript</a>
                    
                      <a class="hover-with-bg" href="/tags/Redux/">Redux</a>
                    
                      <a class="hover-with-bg" href="/tags/React-Hook/">React Hook</a>
                    
                  </div>
                
              </div>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/10/18/%E5%90%8E%E5%8F%B0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">
                        <span class="hidden-mobile">后台返回数据类型转换 --- Tree and Flat Data Convert</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            Total 
            <span id="busuanzi_value_site_pv"></span>
             times
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            Total 
            <span id="busuanzi_value_site_uv"></span>
             people
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  
    
  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
